<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Questionnaire</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .question-container {
            position: relative;
            width: 80%;
            max-width: 500px;
            padding: 20px;
            background-color: #444;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            text-align: center;
            margin-top: -40%;
        }

        .question {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .question p{
            color: #fff;
        }

        .question.active {
            display: block;
            opacity: 1;
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }

        button {
            background-color: #555;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #666;
        }

        /* Popup styling */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 400px;
            padding: 20px;
            background-color: #fff;
            color: #333;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            text-align: center;
            display: none;
        }

        .popup.active {
            display: block;
        }

        .popup button {
            background-color: #444;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
        }

        .popup button:hover {
            background-color: #666;
        }
    .image-carousel img {
        transition: transform 1s ease-in-out;
        width: 100%;
        height: auto;
        display: block;
    }

    .image-carousel img.active {
        transform: scale(1.2);
    }


    </style>
</head>

    <div class="player"> 
        <div class="heading" id="heading">
            <h1>WELCOME AMIGO</h1>
        </div>
        <div class="logo" id="logo">
            <img src="https://img.freepik.com/premium-vector/pcs-logo-pcs-letter-pcs-letter-logo-design-initials-pcs-logo-linked-with-circle-uppercase-monogram-logo-pcs-typography-technology-business-real-estate-brand_229120-82718.jpg" alt="Logo">
            <h2>Patient <br>Case <br>Similarity</h2>
        </div>
    
        <nav>
            <div class="nav">
                <a href="#">Home</a>
                <a href="#">Services</a>
                <a href="#">Profile</a>
                <!-- <i class='bx bx-sun' id="theme-toggle-sun" style="display: none;"></i> -->
                <!-- <i class='bx bx-moon' id="theme-toggle-moon"></i> -->
                <div id="themeToggle">
                    <i class="bx bx-moon" id="themeIcon"></i>
                </div>
                
            </div>
        </nav><br><br>
        
        <div class="image-carousel">
            <div class="image-wrapper">
                <img src="https://etimg.etb2bimg.com/photo/77373028.cms" alt="Hospital View" class="active">
                <div class="hover-text">Acurate Disease Prediction</div>
            </div>
            <div class="image-wrapper">
                <img src="https://c8.alamy.com/comp/2AB2A5X/happy-woman-finding-an-hospital-using-a-gps-navigation-app-on-her-smartphone-2AB2A5X.jpg" alt="Navigation App">
                <div class="hover-text">Hospital Navigation </div>
            </div>
            <div class="image-wrapper">
                <img src="https://st2.depositphotos.com/3591429/11093/i/450/depositphotos_110935906-stock-photo-configent-business-people.jpg" alt="Confident People">
                <div class="hover-text">Consistant Database</div>
            </div>
            <div class="image-wrapper">
                <img src="https://img.freepik.com/premium-vector/book-doctor-appointment-card-template_151150-11155.jpg?semt=ais_hybrid" alt="Book Doctor Appointment">
                <div class="hover-text">Book Doctor Appointment</div>
            </div>
            <div class="image-wrapper">
                <img src="https://img.freepik.com/free-vector/hand-drawn-time-management-concept_52683-55190.jpg" alt="Time Management">
                <div class="hover-text">24/7 Service</div>
            </div>
        </div> 

        </div>
    <div class="question-container">
        <div id="q1" class="question active" data-question="age">
           <p>Enter your age</p> <br>
            <input type="number" id="age" placeholder="Enter your age">
            <div class="button-container">
                <button id="next">Next</button>
            </div>
        </div>
        <div id="q2" class="question" data-question="fever">
        <p>Do you have a fever?</p><br>
            <div class="button-container">
                <button data-value="Yes">Yes</button>
                <button data-value="No">No</button>
            </div>
        </div>
        <div id="q3" class="question" data-question="cough">
          <p>Do you have a cough?</p><br>
            <div class="button-container">
                <button data-value="Yes">Yes</button>
                <button data-value="No">No</button>
            </div>
        </div>
        <div id="q4" class="question" data-question="fatigue">
         <p>Do you have fatigue?</p><br>
            <div class="button-container">
                <button data-value="Yes">Yes</button>
                <button data-value="No">No</button>
            </div>
        </div>
        <div id="q5" class="question" data-question="difficultyBreathing">
       <p>Do you have difficulty in breathing?</p><br>
            <div class="button-container">
                <button data-value="Yes">Yes</button>
                <button data-value="No">No</button>
            </div>
        </div>
        <div id="q6" class="question" data-question="gender">
        <p>Enter your gender</p><br>
            <div class="button-container">
                <button class="gender-button gender-male" data-value="male">Male</button>
                <button class="gender-button gender-female" data-value="female">Female</button>
            </div>
        </div>
        <div id="q7" class="question" data-question="bloodPressure">
        <p>Enter your BP value</p><br>
            <input type="text" id="bp" placeholder="Enter BP value">
            <div class="button-container">
                <button id="next">Next</button>
            </div>
        </div>
        <div id="q8" class="question" data-question="cholesterolLevel">
        <p>Enter your cholesterol level</p><br>
            <input type="text" id="cholesterol" placeholder="Enter cholesterol level">
            <div class="button-container">
                <button id="next">Next</button>
            </div>
        </div>

        <div class="button-container">
            <button id="prev">Previous</button>
        </div>
    </div>

   <!-- Popup to display results -->
<div class="popup" id="resultsPopup">
    <h3>Your Answers</h3>
    <ul id="resultsList"></ul>
    <div class="button-container">
        <button onclick="closePopup()">Close</button>
        <button onclick="findNearestHospital()" id="hospitalButton">Find Nearest Hospital</button>
    </div>
    <div class="button-container" style="margin-top: 10px;">
        <button onclick="callHospital()" id="callButton">Call Emergency</button>
    </div>
    
</div><br><br>


<h1>Technology Used</h1>
<div class="skills">
    <div class="skill-cont">
        <span style="--i:1"><img src="https://e7.pngegg.com/pngimages/410/100/png-clipart-web-development-html-responsive-web-design-logo-javascript-html-angle-web-design-thumbnail.png" alt=""><p>html</p></span>
    <span style="--i:2"><img src="https://w7.pngwing.com/pngs/473/634/png-transparent-css-hd-logo.png" alt=""><p>css</p></span>
    <span style="--i:3"><img src="https://cdn.pixabay.com/photo/2015/04/23/17/41/javascript-736400_640.png" alt=""><p>javascript</p></span>
    <span style="--i:4"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQDDeFWiJwV70GxgegCr1OR-cnD1ZsrrH4-vg&s" alt=""><p>bootstrap</p></span>
    <span style="--i:5"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLQKd_MRed_mZQlgrzQuUXVA3P39ssOVX8_g&s" alt=""><p>docker</p></span>
    <span style="--i:6"><img src="https://i.pinimg.com/originals/5c/7b/53/5c7b53a7be1dd267f24f7559584d1345.jpg" alt=""><p>react js</p></span>
    <span style="--i:7"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTqG9WdrfQDmBKybaFi75VeRTZVUQvgLd6BgQ&s" alt=""><p>python</p></span>
    <span style="--i:8"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSYzn6oxPYDcgaGQwlQBsgY85VNXAIYvyuxXg&s" alt=""><p>mysql</p></span>
    </div>
    </div>

    <script>
         // JavaScript for theme toggle
const themeToggle = document.getElementById('themeToggle');
const themeIcon = document.getElementById('themeIcon');

themeToggle.addEventListener('click', () => {
    themeIcon.classList.add('spin'); // Add animation
    document.body.classList.toggle('light-theme'); // Toggle theme

    setTimeout(() => {
        themeIcon.classList.toggle('bx-moon');
        themeIcon.classList.toggle('bx-sun');
        themeIcon.classList.remove('spin'); // Remove animation after rotation
    }, 400); // Match spin duration
});
    const images = document.querySelectorAll('.image-carousel img');
    let currentIndex = 0;

    function updateActiveImage() {
        // Reset all images to default size
        images.forEach((img, index) => {
            img.classList.toggle('active', index === currentIndex);
        });

        // Update the index for the next image
        currentIndex = (currentIndex + 1) % images.length;
    }

    // Change the active image every 2 seconds
    setInterval(updateActiveImage, 2000);


   const questions = document.querySelectorAll('.question');
const prevButton = document.getElementById('prev');
const resultsPopup = document.getElementById('resultsPopup');
const resultsList = document.getElementById('resultsList');
let currentQuestionIndex = 0;
const answers = {};

// Function to show the current question
function showQuestion(index) {
    questions.forEach((q, i) => {
        q.classList.remove('active');
        if (i === index) {
            q.classList.add('active');
        }
    });
    console.log(`Showing question ${index + 1}/${questions.length}`);
}

// Handle "Previous" button click
prevButton.addEventListener('click', () => {
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
        showQuestion(currentQuestionIndex);
    }
});

// Handle "Next" button click for inputs
document.querySelectorAll('#next').forEach(button => {
    button.addEventListener('click', () => {
        const input = questions[currentQuestionIndex].querySelector('input');
        if (input && input.value.trim() === '') {
            alert('Please enter a valid value!');
            return;
        }

        const questionText = questions[currentQuestionIndex].getAttribute('data-question');
        answers[questionText] = input ? input.value.trim() : null;
        currentQuestionIndex++;

        if (currentQuestionIndex < questions.length) {
            showQuestion(currentQuestionIndex);
        } else {
            showResults();
        }
    });
});

// Handle "Yes/No" button clicks
document.querySelectorAll('button[data-value]').forEach(button => {
    button.addEventListener('click', (e) => {
        const value = e.target.getAttribute('data-value');
        const questionText = questions[currentQuestionIndex].getAttribute('data-question');
        answers[questionText] = value;

        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion(currentQuestionIndex);
        } else {
            showResults();
        }
    });
});

// Show results in popup and send data to the API
function showResults() {
    resultsList.innerHTML = '';
    console.log('Collected answers:', answers);

    // Collect symptoms dynamically
    const symptoms = [];
    if (answers.fever === 'yes') symptoms.push('fever');
    if (answers.cough === 'yes') symptoms.push('cough');
    if (answers.fatigue === 'yes') symptoms.push('fatigue');
    if (answers.difficultyBreathing === 'yes') symptoms.push('difficulty breathing');

    const bloodPressure = answers.bloodPressure || 'medium'; // Default to medium if not provided
    const cholesterolLevel = answers.cholesterolLevel || 'medium'; // Default to medium if not provided

    // Show loading indicator in the popup
    resultsList.innerHTML = '<li>Loading results...</li>';
    resultsPopup.classList.add('active');

    // Construct API URL with query parameters
    //const apiUrl = `https://sheetdb.io/api/v1/rszoewyjdlil6/search?Symptoms=${encodeURIComponent(symptoms.join(','))}&BloodPressure=${bloodPressure}&Cholesterol=${cholesterolLevel}`;
    const apiUrl = `https://sheetdb.io/api/v1/rszoewyjdlil6/search?fever=${answers.fever}&cough=${answers.cough}&fatigue=${answers.fatigue}&difficultyBreathing=${answers.difficultyBreathing}&bloodPressure=${bloodPressure}&cholesterolLevel=${cholesterolLevel}`;
    console.log("API URL:", apiUrl); // Debugging the request URL

    // Fetch data from the API
    fetch(apiUrl)
        .then(response => {
            console.log("Response Status:", response.status);
            if (!response.ok) throw new Error(`API Error: ${response.status}`);
            return response.json();
        })
        .then(data => {
            console.log("API Response:", data); // Debugging the response

            // Clear loading message
            resultsList.innerHTML = '';

            if (Array.isArray(data) && data.length > 0) {
                // Display the first matching disease and precautions
                const disease = data[0]?.disease || "Disease not determined";
                const precautions = data[0]?.precautions || "Precautions not available";

                resultsList.innerHTML = `
                    <li>Possible Disease: ${disease}</li>
                    <li>Precautions: ${precautions}</li>
                `;
            } else {
                resultsList.innerHTML = '<li>No matching disease found. Please consult a doctor.</li>';
            }
        })
        .catch(error => {
            console.error("Fetch Error:", error);
            resultsList.innerHTML = '<li>Error fetching data. Please try again later.</li>';
        });
}

// Close the results popup
function closePopup() {
    resultsPopup.classList.remove('active');
}

function findNearestHospital() {
    if (!navigator.geolocation) {
        alert("Geolocation is not supported by your browser.");
        return;
    }

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;

            // Open Google Maps in a new tab with nearby hospitals search
            const googleMapsUrl = `https://www.google.com/maps/search/hospitals/@${latitude},${longitude},14z`;
            window.open(googleMapsUrl, '_blank');
        },
        (error) => {
            console.error("Error fetching geolocation:", error);
            alert("Unable to retrieve your location. Please try again.");
        }
    );
}

function callHospital() {
    const hospitalPhoneNumber = "+91 7416577487"; // Replace with the actual hospital phone number
    const telLink = `tel:${hospitalPhoneNumber}`;

    // Open the phone dialer with the predefined hospital number
    window.location.href = telLink;
}

    </script>
</body>
</html>
